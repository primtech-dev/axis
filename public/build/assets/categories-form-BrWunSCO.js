import{$ as e}from"./jquery-DxCMfk7S.js";import{i as c}from"./choices-helper-DdZc0wPI.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./jquery-BQXThELV.js";import"./choices-BgrVbzTe.js";function o(t){window.toast&&typeof window.toast.error=="function"?window.toast.error(t):console.warn("Toast not available:",t)}function f(t){return t?t.toString().normalize("NFKD").replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-").toLowerCase():""}function m(t){return t==null?!1:!isNaN(t)&&isFinite(t)}e(function(){try{const r=document.querySelector('select[name="parent_id"]');r&&c(r,{searchEnabled:!0,itemSelectText:"",shouldSort:!1,placeholderValue:"Pilih parent (opsional)",removeItems:!1,maxItemCount:1,allowHTML:!1})}catch(r){console.warn("Choices init failed:",r)}const t=e("#name"),n=e("#slug"),s=e("#position"),l=e("#categoryForm");t.on("input",function(){const r=e(this).val().trim();n.length&&(n.val().trim()||n.val(f(r)))}),s.on("blur",function(){const r=e(this).val();r===""||m(r)||(o("Posisi harus berupa angka."),e(this).val("0").focus())}),l.on("submit",function(r){const u=t.val().trim(),a=n.val().trim();if(!u)return r.preventDefault(),o("Nama kategori harus diisi."),t.focus(),!1;if(a&&!/^[a-z0-9\-]+$/.test(a))return r.preventDefault(),o("Slug hanya boleh huruf kecil, angka, dan tanda minus (-)."),n.focus(),!1;const i=e(this).find('button[type="submit"]').first();return i.prop("disabled",!0),i.data("orig-html",i.html()),i.html('<span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span> Menyimpan...'),!0}),typeof window.serverValidationErrors<"u"&&Array.isArray(window.serverValidationErrors)&&window.serverValidationErrors.forEach(r=>o(r))});

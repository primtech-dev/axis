class g{constructor({sidebarSelector:t="#chat-sidebar",sidebarContactAttribute:e="data-chat-id",sidebarContactSelector:a=`[${e}]`,searchSelector:i="[data-chat-search]",contentSelector:s="[data-chat]",inputSelector:r="[data-chat-input]",sendSelector:o="[data-send]",errorSelector:m="[data-error]",usernameSelector:n="[data-chat-username]",data:u=[]}={}){this.sidebar=document.querySelector(t),this.sidebarContactAttribute=e,this.sidebarContactSelector=a,this.searchInput=document.querySelector(i),this.chatContent=document.querySelector(s),this.chatInput=document.querySelector(r),this.sendButton=document.querySelector(o),this.errorElement=document.querySelector(m),this.usernameElement=document.querySelector(n),this.activeChatId=null,this.chatData=Array.isArray(u)?u:[],this.init()}init(){const t=this.chatData[0];if(this.setupSearch(),this.sidebar&&(this.sidebar.addEventListener("click",e=>{const a=e.target.closest(this.sidebarContactSelector);a&&this.switchChat(a.dataset.chatId,a)}),t)){const e=this.sidebar.querySelector(`[${this.sidebarContactAttribute}="${t.id}"]`);this.switchChat(t.id,e)}this.sendButton&&this.sendButton.addEventListener("click",()=>this.sendMessage()),this.chatInput&&(this.chatInput.addEventListener("keypress",e=>{e.key==="Enter"&&(e.preventDefault(),this.sendMessage())}),this.chatInput.addEventListener("input",()=>{const e=this.chatInput.value.trim();this.sendButton.disabled=!e,this.errorElement&&e&&(this.errorElement.classList.remove("d-block"),this.errorElement.classList.add("d-none"),this.errorTimeout&&clearTimeout(this.errorTimeout))}))}getChatById(t){return this.chatData.find(e=>e.id===t)}switchChat(t,e=null){var i;const a=this.getChatById(t);a&&(this.activeChatId=t,this.renderMessages(a.messages),this.sidebar&&this.sidebar.querySelectorAll(this.sidebarContactSelector).forEach(s=>s.classList.remove("active")),e&&e.classList.add("active"),(i=this.chatInput)==null||i.focus(),this.usernameElement&&(this.usernameElement.innerHTML=a.contact.name),setTimeout(()=>{var o,m;const s=(m=(o=window.SimpleBar)==null?void 0:o.instances)==null?void 0:m.get(this.chatContent),r=s?s.getScrollElement():this.chatContent;r.scrollTop=r.scrollHeight},50))}renderMessages(t){var i,s;if(!t||!this.chatContent)return;const e=(s=(i=window.SimpleBar)==null?void 0:i.instances)==null?void 0:s.get(this.chatContent),a=e?e.getContentElement():this.chatContent;if(a.innerHTML=t.map(r=>{const o=r.from==="me",m=o?"text-end justify-content-end":"",n=o?"bg-info-subtle":"bg-warning-subtle";return`
                <div class="d-flex align-items-start gap-2 my-3 chat-item ${m}">
                    ${o?"":`<img src="${r.avatar}" class="avatar-md rounded-circle" alt="User">`}
                    <div>
                        <div class="chat-message py-2 px-3 ${n} rounded">${r.text}</div>
                        <div class="text-muted fs-xs mt-1"><i class="ti ti-clock"></i> ${r.time||""}</div>
                    </div>
                    ${o?`<img src="${r.avatar}" class="avatar-md rounded-circle" alt="User">`:""}
                </div>
            `}).join(""),e){e.recalculate();const r=e.getScrollElement();r.scrollTop=r.scrollHeight}else this.chatContent.scrollTop=this.chatContent.scrollHeight}sendMessage(){if(!this.chatInput||!this.activeChatId)return;const t=this.chatInput.value.trim();if(this.errorTimeout&&clearTimeout(this.errorTimeout),!t){this.errorElement&&(this.errorElement.textContent="Message cannot be empty.",this.errorElement.classList.remove("d-none"),this.errorElement.classList.add("d-block"),this.errorTimeout=setTimeout(()=>{this.errorElement.classList.remove("d-block"),this.errorElement.classList.add("d-none")},3e3));return}this.errorElement&&(this.errorElement.classList.remove("d-block"),this.errorElement.classList.add("d-none"));const e=this.getChatById(this.activeChatId);if(!e)return;const i=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}).toLowerCase(),s={from:"me",text:t,time:i,avatar:"/images/users/user-2.jpg"};e.messages.push(s),this.renderMessages(e.messages),this.chatInput.value="",this.sendButton.disabled=!0,this.simulateIncomingMessage(e.id)}setupSearch(){this.searchInput&&this.searchInput.addEventListener("keyup",t=>{const e=t.target.value.toLowerCase();document.querySelector(".list-group").querySelectorAll(".list-group-item").forEach(s=>{const o=[...s.querySelectorAll("[data-chat-search-field]")].some(m=>m.textContent.toLowerCase().includes(e));s.style.setProperty("display",o?"":"none","important")})})}simulateIncomingMessage(t){const e=this.getChatById(t);if(!e)return;const a=["Can't chat, calls only","ðŸ˜‘ðŸ˜‘ðŸ˜‘","ðŸ‘","Thanks!","Talk soon.","No worries ðŸ˜„"],s=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}).toLowerCase(),r={from:e.contact.name,text:a[Math.floor(Math.random()*a.length)],time:s,avatar:e.contact.avatar};setTimeout(()=>{e.messages.push(r),this.activeChatId===t&&this.renderMessages(e.messages)},Math.random()*2e3+1e3)}}const h=[{id:"chat1",contact:{name:"Ava Thompson",avatar:"/images/users/user-4.jpg"},messages:[{from:"Ava Thompson",text:"Hey! Are you available for a quick call? ðŸ“ž",time:"08:55 am",avatar:"/images/users/user-4.jpg"},{from:"me",text:"Sure, give me 5 minutes. Just wrapping something up.",time:"08:57 am",avatar:"/images/users/user-2.jpg"},{from:"Ava Thompson",text:"Perfect. Let me know when you're ready ðŸ‘",time:"08:58 am",avatar:"/images/users/user-4.jpg"},{from:"me",text:"Ready now. Calling you!",time:"09:00 am",avatar:"/images/users/user-2.jpg"},{from:"Ava Thompson",text:"Thanks for your time earlier!",time:"09:45 am",avatar:"/images/users/user-4.jpg"},{from:"me",text:"Of course! It was a productive discussion.",time:"09:46 am",avatar:"/images/users/user-2.jpg"},{from:"Ava Thompson",text:"Iâ€™ll send over the updated files by noon.",time:"09:50 am",avatar:"/images/users/user-4.jpg"},{from:"me",text:"Great, Iâ€™ll review them once they arrive.",time:"09:52 am",avatar:"/images/users/user-2.jpg"},{from:"Ava Thompson",text:"Just sent them via Drive. Let me know if you have issues accessing.",time:"12:03 pm",avatar:"/images/users/user-4.jpg"},{from:"me",text:"Got them. Everything looks good so far!",time:"12:10 pm",avatar:"/images/users/user-2.jpg"},{from:"Ava Thompson",text:"Awesome ðŸ˜Š Looking forward to your feedback!",time:"12:12 pm",avatar:"/images/users/user-4.jpg"},{from:"me",text:"Will get back to you after lunch ðŸ´",time:"12:13 pm",avatar:"/images/users/user-2.jpg"},{from:"Ava Thompson",text:"No rush, enjoy your lunch! ðŸ˜„",time:"12:14 pm",avatar:"/images/users/user-4.jpg"},{from:"me",text:"Thanks! Talk soon.",time:"12:15 pm",avatar:"/images/users/user-2.jpg"}]},{id:"chat2",contact:{name:"Noah Smith",avatar:"/images/users/user-5.jpg"},messages:[{from:"Noah Smith",text:"Hey, quick questionâ€”did you check the latest design mockups?",time:"10:05 am",avatar:"/images/users/user-5.jpg"},{from:"me",text:"Not yet, just logging in now. Want me to prioritize that?",time:"10:06 am",avatar:"/images/users/user-2.jpg"},{from:"Noah Smith",text:"Yes please. I need your feedback before the client review at noon.",time:"10:07 am",avatar:"/images/users/user-5.jpg"},{from:"me",text:"Got it. Iâ€™ll go through them and send notes in a bit.",time:"10:08 am",avatar:"/images/users/user-2.jpg"},{from:"Noah Smith",text:"Thanks a ton!",time:"10:08 am",avatar:"/images/users/user-5.jpg"},{from:"me",text:"First impression: very clean. Minor spacing issues though.",time:"10:20 am",avatar:"/images/users/user-2.jpg"},{from:"Noah Smith",text:"Noted. Fixing those now.",time:"10:21 am",avatar:"/images/users/user-5.jpg"},{from:"me",text:"Sent detailed feedback via email too ðŸ“¬",time:"10:25 am",avatar:"/images/users/user-2.jpg"},{from:"Noah Smith",text:"Got it. Appreciate the quick turnaround!",time:"10:26 am",avatar:"/images/users/user-5.jpg"}]},{id:"chat3",contact:{name:"Liam Turner",avatar:"/images/users/user-7.jpg"},messages:[{from:"Liam Turner",text:"Morning! Did you update the backend endpoints yet?",time:"09:15 am",avatar:"/images/users/user-7.jpg"},{from:"me",text:"Morning! Just pushed the changes to dev branch.",time:"09:16 am",avatar:"/images/users/user-2.jpg"},{from:"Liam Turner",text:"Awesome, Iâ€™ll pull and test on my side.",time:"09:17 am",avatar:"/images/users/user-7.jpg"},{from:"me",text:"Let me know if anything breaks âš ï¸",time:"09:18 am",avatar:"/images/users/user-2.jpg"},{from:"Liam Turner",text:"Looks good so far. Just one CORS error.",time:"09:20 am",avatar:"/images/users/user-7.jpg"},{from:"me",text:"Ah, forgot the whitelist entry. Fixing now.",time:"09:21 am",avatar:"/images/users/user-2.jpg"},{from:"Liam Turner",text:"Reloadedâ€¦ and it's working. All green âœ…",time:"09:23 am",avatar:"/images/users/user-7.jpg"},{from:"me",text:"Nice! That wraps our side for this sprint then?",time:"09:24 am",avatar:"/images/users/user-2.jpg"},{from:"Liam Turner",text:"Yep. Good work ðŸ’ª",time:"09:25 am",avatar:"/images/users/user-7.jpg"}]},{id:"chat4",contact:{name:"Emma Wilson",avatar:"/images/users/user-4.jpg"},messages:[{from:"Ava Thompson",text:"Hey! Are you available for a quick call? ðŸ“ž",time:"08:55 am",avatar:"/images/users/user-4.jpg"},{from:"me",text:"Sure, give me 5 minutes. Just wrapping something up.",time:"08:57 am",avatar:"/images/users/user-2.jpg"},{from:"Ava Thompson",text:"Perfect. Let me know when you're ready ðŸ‘",time:"08:58 am",avatar:"/images/users/user-4.jpg"},{from:"me",text:"Ready now. Calling you!",time:"09:00 am",avatar:"/images/users/user-2.jpg"},{from:"Ava Thompson",text:"Thanks for your time earlier!",time:"09:45 am",avatar:"/images/users/user-4.jpg"},{from:"me",text:"Of course! It was a productive discussion.",time:"09:46 am",avatar:"/images/users/user-2.jpg"},{from:"Ava Thompson",text:"Iâ€™ll send over the updated files by noon.",time:"09:50 am",avatar:"/images/users/user-4.jpg"},{from:"me",text:"Great, Iâ€™ll review them once they arrive.",time:"09:52 am",avatar:"/images/users/user-2.jpg"}]},{id:"chat5",contact:{name:"Olivia Martinez",avatar:"/images/users/user-8.jpg"},messages:[{from:"Olivia Martinez",text:"Thanks a ton!",time:"10:08 am",avatar:"/images/users/user-8.jpg"},{from:"me",text:"First impression: very clean. Minor spacing issues though.",time:"10:20 am",avatar:"/images/users/user-2.jpg"},{from:"Olivia Martinez",text:"Noted. Fixing those now.",time:"10:21 am",avatar:"/images/users/user-8.jpg"},{from:"me",text:"Sent detailed feedback via email too ðŸ“¬",time:"10:25 am",avatar:"/images/users/user-2.jpg"},{from:"Olivia Martinez",text:"Got it. Appreciate the quick turnaround!",time:"10:26 am",avatar:"/images/users/user-8.jpg"}]},{id:"chat6",contact:{name:"William Davis",avatar:"/images/users/user-7.jpg"},messages:[{from:"William Davis",text:"Looks good so far. Just one CORS error.",time:"09:20 am",avatar:"/images/users/user-7.jpg"},{from:"me",text:"Ah, forgot the whitelist entry. Fixing now.",time:"09:21 am",avatar:"/images/users/user-2.jpg"},{from:"William Davis",text:"Reloadedâ€¦ and it's working. All green âœ…",time:"09:23 am",avatar:"/images/users/user-7.jpg"},{from:"me",text:"Nice! That wraps our side for this sprint then?",time:"09:24 am",avatar:"/images/users/user-2.jpg"},{from:"William Davis",text:"Yep. Good work ðŸ’ª",time:"09:25 am",avatar:"/images/users/user-7.jpg"}]},{id:"chat7",contact:{name:"Sophia Moore",avatar:"/images/users/user-10.jpg"},messages:[{from:"me",text:"Of course! It was a productive discussion.",time:"09:46 am",avatar:"/images/users/user-2.jpg"},{from:"Sophia Moore",text:"Iâ€™ll send over the updated files by noon.",time:"09:50 am",avatar:"/images/users/user-10.jpg"},{from:"me",text:"Great, Iâ€™ll review them once they arrive.",time:"09:52 am",avatar:"/images/users/user-2.jpg"},{from:"Sophia Moore",text:"Just sent them via Drive. Let me know if you have issues accessing.",time:"12:03 pm",avatar:"/images/users/user-10.jpg"},{from:"me",text:"Got them. Everything looks good so far!",time:"12:10 pm",avatar:"/images/users/user-2.jpg"},{from:"Sophia Moore",text:"Awesome ðŸ˜Š Looking forward to your feedback!",time:"12:12 pm",avatar:"/images/users/user-10.jpg"},{from:"me",text:"Will get back to you after lunch ðŸ´",time:"12:13 pm",avatar:"/images/users/user-2.jpg"},{from:"Sophia Moore",text:"No rush, enjoy your lunch! ðŸ˜„",time:"12:14 pm",avatar:"/images/users/user-10.jpg"},{from:"me",text:"Thanks! Talk soon.",time:"12:15 pm",avatar:"/images/users/user-2.jpg"}]},{id:"chat8",contact:{name:"Jackson Lee",avatar:"/images/users/user-2.jpg"},messages:[{from:"Jackson Lee",text:"Thanks a ton!",time:"10:08 am",avatar:"/images/users/user-2.jpg"},{from:"me",text:"First impression: very clean. Minor spacing issues though.",time:"10:20 am",avatar:"/images/users/user-2.jpg"},{from:"Jackson Lee",text:"Noted. Fixing those now.",time:"10:21 am",avatar:"/images/users/user-2.jpg"},{from:"me",text:"Sent detailed feedback via email too ðŸ“¬",time:"10:25 am",avatar:"/images/users/user-2.jpg"},{from:"Jackson Lee",text:"Got it. Appreciate the quick turnaround!",time:"10:26 am",avatar:"/images/users/user-2.jpg"}]},{id:"chat9",contact:{name:"Chloe Anderson",avatar:"/images/users/user-3.jpg"},messages:[{from:"Chloe Anderson",text:"Looks good so far. Just one CORS error.",time:"09:20 am",avatar:"/images/users/user-3.jpg"},{from:"me",text:"Ah, forgot the whitelist entry. Fixing now.",time:"09:21 am",avatar:"/images/users/user-2.jpg"},{from:"Chloe Anderson",text:"Reloadedâ€¦ and it's working. All green âœ…",time:"09:23 am",avatar:"/images/users/user-3.jpg"},{from:"me",text:"Nice! That wraps our side for this sprint then?",time:"09:24 am",avatar:"/images/users/user-2.jpg"},{from:"Chloe Anderson",text:"Yep. Good work ðŸ’ª",time:"09:25 am",avatar:"/images/users/user-3.jpg"}]},{id:"chat10",contact:{name:"Lucas Wright",avatar:"/images/users/user-4.jpg"},messages:[{from:"me",text:"Great, Iâ€™ll review them once they arrive.",time:"09:52 am",avatar:"/images/users/user-2.jpg"},{from:"Lucas Wright",text:"Just sent them via Drive. Let me know if you have issues accessing.",time:"12:03 pm",avatar:"/images/users/user-4.jpg"},{from:"me",text:"Got them. Everything looks good so far!",time:"12:10 pm",avatar:"/images/users/user-2.jpg"},{from:"Lucas Wright",text:"Awesome ðŸ˜Š Looking forward to your feedback!",time:"12:12 pm",avatar:"/images/users/user-4.jpg"},{from:"me",text:"Will get back to you after lunch ðŸ´",time:"12:13 pm",avatar:"/images/users/user-2.jpg"},{from:"Lucas Wright",text:"No rush, enjoy your lunch! ðŸ˜„",time:"12:14 pm",avatar:"/images/users/user-4.jpg"},{from:"me",text:"Thanks! Talk soon.",time:"12:15 pm",avatar:"/images/users/user-2.jpg"}]},{id:"chat11",contact:{name:"Mia Scott",avatar:"/images/users/user-6.jpg"},messages:[{from:"me",text:"First impression: very clean. Minor spacing issues though.",time:"10:20 am",avatar:"/images/users/user-2.jpg"},{from:"Mia Scott",text:"Noted. Fixing those now.",time:"10:21 am",avatar:"/images/users/user-6.jpg"},{from:"me",text:"Sent detailed feedback via email too ðŸ“¬",time:"10:25 am",avatar:"/images/users/user-2.jpg"},{from:"Mia Scott",text:"Got it. Appreciate the quick turnaround!",time:"10:26 am",avatar:"/images/users/user-6.jpg"}]},{id:"chat12",contact:{name:"Benjamin Clark",avatar:"/images/users/user-9.jpg"},messages:[{from:"Benjamin Clark",text:"Looks good so far. Just one CORS error.",time:"09:20 am",avatar:"/images/users/user-9.jpg"},{from:"me",text:"Ah, forgot the whitelist entry. Fixing now.",time:"09:21 am",avatar:"/images/users/user-2.jpg"},{from:"Benjamin Clark",text:"Reloadedâ€¦ and it's working. All green âœ…",time:"09:23 am",avatar:"/images/users/user-9.jpg"},{from:"me",text:"Nice! That wraps our side for this sprint then?",time:"09:24 am",avatar:"/images/users/user-2.jpg"},{from:"Benjamin Clark",text:"Yep. Good work ðŸ’ª",time:"09:25 am",avatar:"/images/users/user-9.jpg"}]}];document.addEventListener("DOMContentLoaded",()=>{new g({data:h})});
